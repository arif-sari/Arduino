#include <SoftwareSerial.h>
SoftwareSerial led(4, 5);  //rx -tx pinleri
char veri;
float delay_time;
const int dirPin = 2;
const int stepPin = 3;
const int stepsPerRevolution = 200;

void setup() {
  Serial.begin(9600);
  led.begin(9600);
  pinMode(13, OUTPUT);
  pinMode(stepPin, OUTPUT);
  pinMode(dirPin, OUTPUT);
}

void loop() {
  if (led.available()) {
    veri = led.read();
    delay(10);
    if (veri == '1') {
      digitalWrite(13, HIGH);
    }
    if (veri == '2') {
      digitalWrite(13, LOW);
    }

    if (veri == '3') {
      digitalWrite(dirPin, HIGH);
      for (int x = 0; x < stepsPerRevolution; x++) {
        digitalWrite(stepPin, HIGH);
        delayMicroseconds(600);
        digitalWrite(stepPin, LOW);
        delayMicroseconds(600);
      }
    }
  }
}
